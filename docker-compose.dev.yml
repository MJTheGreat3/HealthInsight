# Override for development
services:
  backend:
    volumes:
      - ./backend/src:/app/src:rw  # Read-write for development
      - ./backend/firebase-admin.json:/app/firebase-admin.json:ro
      - ./backend/requirements.txt:/app/requirements.txt:ro
    environment:
      - DEBUG=true
      - RELOAD=true
      - MONGODB_URL=mongodb://admin:password123@mongodb:27017/healthinsight?authSource=admin
      - PYTHONPATH=/app/src
    command: ["python", "-m", "uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]  # Enable hot reload

  frontend:
    build:
      context: ./Frontend
      dockerfile: Dockerfile.dev
    environment:
      - VITE_API_URL=http://localhost:8000  # For development
    volumes:
      - ./Frontend/src:/app/src:rw  # Hot reload support
    ports:
      - "5174:5173"  # Use port 5174 to avoid conflicts